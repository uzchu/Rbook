# R programing



### R의 특징

> 다른 언어와의 차이점

| 차이점               | R                                                       | 타 언어                             |
| -------------------- | ------------------------------------------------------- | ----------------------------------- |
| 데이터를 다루는 방법 | 벡터연산 사용해 전체 데이터를 한번에 처리 (속도가 빠름) | for문을 사용해 한행씩 읽어들여 처리 |
| 결측치               | NA                                                      | NULL                                |
| 객체의 불변성        | 객체 값 수정 불가 (≒수정된 새로운 객체 생성)            |                                     |



### 흐름제어 (조건문과 반복문)

**- 조건문** 

1. if

- 기본문법

```R
if (조건) {
	조건이 참일 때 실행할 문장
}else{
	조건이 거짓일 때 실행할 문장
}
```

- ifelse함수 : 주어진 test값에 따라 yes 또는 no 반환

``` 
ifelse(
	test,	#참, 거짓을 저장한 객체
	yes,	#참 일때 선택할 값
	no,		#거짓일 때 선택할 값
)
```



**- 반복문**

1. for (횟수 有)

- 기본문법 : data에 들어있는 각각의 값을 변수 i에 할당하면서 각각에 대해 수행

```R
for (i in data) {
	i를 사용한 문장
}
```

2. while (True일 때 repeat과 같음, 무한루프)

- 기본문법 : 조건이 참일 때 수행

```R
while (조건) {
	조건이 참일 때 수행할 문장
}
```

3. repeat (무한루프)

- 기본문법 :블록안의 문장 반복해서 수행 (다른 언어의 do-while)

```R
repeat {
	반복 수행할 문장
}
# if 문으로 조건 확인해서 break로 빠져나오게 해야함
```

4. 수행조정

- break : 반복문 종료
- next : 현재 수행중 반복문 블록의 수행을 중단하고 다음 반복 시작 (수행중단하고 처음으로 감)



### 연산

> R은 기본적으로 개별적으로 연산 X, 벡터에 통째로 연산자를 적용

**- 수치연산**

| 연산자와 함수      | 의미                         |
| ------------------ | ---------------------------- |
| n %% m             | **나머지**                   |
| n %/% m            | **몫**                       |
| exp(n)             | e의 n승                      |
| log(x,base=exp(1)) | logbase(x). 기본값은 loge(x) |

**- 벡터연산**

```
데이터셋[조건, ] >> 조건에 해당하는 행만 가져옴
ex ) d[d$colname %% 2== 0, ]
```



### NA의 처리

> 값이 기록되지 않았거나 관측되지 않은 경우 (결측치)
>
> 데이터에 NA가 포함되어 있을 경우 연산결과는 무조건 NA가 나옴

**- 함수 내 NA처리 인자**

- na.rm = TRUE를 처리하면 NA를 해당 연산에서 제외

  ```
  sum(c(1,2,3,NA),na.rm=True)
  >> 6
  ```

  

**- NA처리 함수**

| 함수       | 의미                                                         |
| ---------- | ------------------------------------------------------------ |
| na.fail    | NA가 포함되어 있으면 실패                                    |
| na.omit    | NA가 포함되어 있으면 이를 제외                               |
| na.exclude | NA가 포함되어 있으면 이를 제외<br />그러나 naresid, napredic를 사용하는 함수에서 NA로 제외한 행을 결과에 다시 추가 |
| na.pass    | NA가 포함되어 있더라도 통과                                  |

- na.action을 함수 인자로 받는 함수의 경우 위의 함수들을 사용해 원하는 대로 NA정제
- na.omit과 na.exclude차이

```
선형 회귀 함수 모델을 만들 고 resid()함수를 적용하면 잔차 구할 수 있음
이때 na.action값을 na.omit했을 경우엔 NA값이 포함된 행을 제외하고 모델을 만들어서 resid()결과의 길이가 원래 데이터와 다름

na.exclude를 지정했을 경우에도 NA값을 제외하고 모델을 만들지만, 잔차를 구할 때 NA가 포함된 행에 잔차를 NA로 추가해서 resid()의 결과의 길이가 원래 데이터와 같음
```



### 함수의 정의

**- 기본정의**

```R
function_name <- funciton(인자,인자, ...){
	함수 본문
	return 반환값 # 없다면 생략
}
```

- 주의사항
  - `return 반환값`이 아니라 `return (반환값)` 형태로 작성해야함
  - `return()`을 생략하면 마지막 문장의 반환값이 함수의 반환값이 됨 (보통은 return()을 적어줘 코드의 의도를 명확히 함)

- 함수 호출시에는 인자의 위치를 맞춰서 넘겨주거나 인자의 이름을 적어서 넘겨주는 방식

**- 가변 길이 인자**

- 인자에 `...`을 넣을 경우
  - 개수를 알 수 없는 임의의 인자를 표현
  - 내부에서 호출하는 다른 함수에 넘겨줄 인자 표시

**- 중첩함수**

- 함수 안에 또다른 함수를 정의하는 것
- 중첩함수를 사용하면 함수안에서 반복되는 동작을 함수로 만들어 코드를 간결하게 표현가능
- 내부함수가 외부함수에 정의된 변수를 접근할 수 있어 클로저로 사용가능
  - 클로저란? 